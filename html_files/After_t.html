<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CAS完美After_game</title>
    <link rel="stylesheet" href="./css/index.css" type="text/css">
    <script src="./js/jquery-1.8.3.js" type="text/javascript"></script>
    <script src="./js/setting.js" type="text/javascript"></script>
    <style type="text/css">
        .img li img{
            width: 223px;
        }
    </style>
</head>
<body>
    <div class="box">
        <div class="after_con layout">
            <ul class="img" id="photo">
                <!-- <li><img src="img/After_game_bg1.png" alt=""></li> -->
            </ul>
            <ul class="table">
                <li id="name">
                    <span class="span1"></span>
<!--                     <span class="span2">CSGO MASTER</span> -->
                </li>
                <li id="kills">
                    <span class="span1">KILLS</span>
<!--                     <span>23</span> -->
                </li>
                <li id="deaths">
                    <span class="span1">DEATHS</span>
<!--                     <span>23</span> -->
                </li>
                <li id="assists">
                    <span class="span1">ASSISTS</span>
<!--                     <span>23</span> -->
                </li>
                <li id="entry_kills">
                    <span class="span1">ENTRY KILLS</span>
<!--                     <span>23</span> -->
                </li>
                <li id="kd_rate">
                    <span class="span1">K/D RATE</span>
<!--                     <span>23</span> -->
                </li>
            </ul>
        </div>
    </div>
    <script type="text/javascript">
        $.ajax({
            type:"GET",
            url:url,
            success: function(data){
                if (data.success && data.data != null) {
                    showplayer(data.data);
                }else{
                    $.getJSON(json_url,function(data){
                        showplayer(data.data);
                    });
                }
            },
            error: function(){
                $.getJSON(json_url,function(data){
                    showplayer(data.data);
                });
            }
        });        
        function showplayer(data){
            var players = data.players;
            var show_players = [];
            for(var key in players){    
                if(players[key].player_info.team_id == data.t_team_id){
                    show_players.push(players[key]);
                }
            }    
            for (var i = show_players.length - 1; i >= 0; i--) {
                $("#photo").append('<li><img src="./photo/'+ show_players[i].player_info.name +'.png" alt=""></li>');
                $("#name").append('<span class="span2">'+ show_players[i].player_info.name +'</span>');
                $("#kills").append('<span class="span2">'+ show_players[i].kill +'</span>');
                $("#deaths").append('<span class="span2">'+ show_players[i].death +'</span>');
                $("#assists").append('<span class="span2">'+ show_players[i].assist +'</span>');
                $("#entry_kills").append('<span class="span2">'+ show_players[i].first_kill +'</span>');
                if(show_players[i].death==0){
                    show_players[i].death=1;
                }
                $("#kd_rate").append('<span class="span2">'+ (show_players[i].kill/show_players[i].death).toFixed(2) +'</span>');
            }
        }

    </script>
</body>
</html>